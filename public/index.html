<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mafia Stand-off â€“ Realtime</title>
  <link rel="icon" type="image/x-icon" href="img/logo.png">
  <meta name="description" content="Mafia Stand-off: Realtime karetnÃ­ hra inspirovanÃ¡ noir mafiÃ¡nskÃ½m svÄ›tem. Hrajte s pÅ™Ã¡teli v reÃ¡lnÃ©m Äase.">

  <!-- NaÄÃ­tÃ¡nÃ­ rozdÄ›lenÃ½ch CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/buttons.css">
  <link rel="stylesheet" href="css/lobby.css">
  <link rel="stylesheet" href="css/board.css">
  <link rel="stylesheet" href="css/cards.css">
  <link rel="stylesheet" href="css/overlays.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/scrollbar.css">

  <!-- Game script -->
  <script src="game.js" defer></script>
</head>

<body>
  <div id="app" class="grid">

    <!-- LOBBY -->
    <section class="panel lobby-hero" id="lobbyPanel" aria-label="Lobby">
      <!-- HERO BANNER -->
      <div class="lobby-banner" aria-hidden="true">
        <img src="img/banner.jpg" alt="Mafia Stand-off Banner">
      </div>

      <div class="lobby-wrap">
        <!-- LEFT -->
        <div class="lobby-left">
          <div class="lobby-title">
            <img src="img/logo.png" alt="Mafia Stand-off Logo" class="logo-img">
            <div>
              <div class="brand">Mafia Stand-off</div>
              <div class="muted">Real-time party card game â€¢ 2 aÅ¾ 7 hrÃ¡ÄÅ¯</div>
            </div>
          </div>

          <div class="glass">
            <div class="muted" style="margin-bottom:8px">VytvoÅ™it novou hru</div>
            <div class="row">
              <input id="name" class="input big" placeholder="VaÅ¡e jmÃ©no" />
              <button id="createBtn" class="btn pill btn-primary">+ VytvoÅ™it lobby</button>
            </div>
            <div class="hint" style="margin-top:8px">Tip: jmÃ©no mÅ¯Å¾eÅ¡ kdykoli zmÄ›nit pÅ™ed pÅ™ipojenÃ­m.</div>
          </div>

          <div class="glass players-card">
            <div class="muted" style="margin-bottom:6px">HrÃ¡Äi v lobby</div>
            <div id="players" class="list muted"><span class="hint">ZatÃ­m nikdoâ€¦</span></div>
            <div class="cta-row" style="margin-top:10px">
              <button id="readyBtn" class="btn pill btn-secondary">Jsem pÅ™ipraven</button>
              <button id="startBtn" class="btn pill btn-success" disabled>â–¶ Start hry (host)</button>
            </div>
            <div id="lobbyInfo" class="hint" style="margin-top:8px"></div>
          </div>

          <div class="hint">Verze 0.2.4-alpha</div>
        </div>

        <!-- RIGHT -->
        <div class="lobby-right">
          <div class="glass">
            <div class="muted" style="margin-bottom:8px">PÅ™ipojit se ke hÅ™e</div>
            <div class="row">
              <input id="joinId" class="input big" placeholder="KÃ³d lobby (napÅ™. ABCD)" style="width:100%;max-width:260px" />
              <button id="joinBtn" class="btn pill">PÅ™ipojit</button>
            </div>
            <div style="margin-top:12px">
              <span class="lobby-code">KÃ“D: <span id="codeMirror">â€”</span></span>
            </div>
            <div class="hint" style="margin-top:6px">KÃ³d sdÃ­lÃ­ host potÃ©, co lobby vytvoÅ™Ã­.</div>
          </div>

          <div class="glass" style="margin-top:12px">
            <div class="muted">Jak to funguje?</div>
            <ul class="muted" style="margin:6px 0 0 18px; line-height:1.6">
              <li>Host klikne â€VytvoÅ™it lobbyâ€œ â€“ objevÃ­ se kÃ³d.</li>
              <li>OstatnÃ­ zadajÃ­ kÃ³d a kliknou â€PÅ™ipojitâ€œ.</li>
              <li>Jakmile je vÃ¡s min. 2 a vÅ¡ichni jsou â€PÅ™ipraveniâ€œ, host mÅ¯Å¾e â€Start hryâ€œ.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- BOARD -->
    <section class="panel" id="boardPanel" style="display:none" aria-label="HernÃ­ stÅ¯l">
      <div class="board-top row" style="justify-content:space-between;align-items:flex-start">
        <div>
          <b>ğŸ•´ï¸ Mafia Stand-off</b> <span class="muted" id="roomTag"></span>
          <div class="hud" id="hud"></div>
          <div class="hud" id="continental"></div>

          <!-- âœ… NovÃ½ HUD Å™Ã¡dek se sprÃ¡vnÃ½mi ID -->
           
          <div class="row" style="margin-top:8px; gap:16px; font-size:14px">
            <div>ğŸ” Na tahu: <b id="turnName">â€”</b></div>
            <div>ğŸ“¦ BalÃ­Äek: <b id="deckCount">0</b></div>
            <div>ğŸ—‘ï¸ OdhazovacÃ­: <b id="discardCount">0</b></div>
          </div>
          
          <!-- ğŸ”¹ Piles (draw + discard) -->
          <div class="piles">
            <!-- Draw pile (zadnÃ­ strana) -->
            <div class="pile draw" id="drawPile" title="BalÃ­Äek">
              <div class="stack">
                <div class="card-back layer"></div>
                <div class="card-back layer"></div>
                <div class="card-back layer"></div>
              </div>
              <div class="count-badge" id="deckCountBadge">0</div>
            </div>

            <!-- Discard pile (poslednÃ­ karta navrchu) -->
            <div class="pile discard" id="discardPile" title="OdhazovacÃ­ balÃ­Äek">
              <div class="stack">
                <img id="discardTopImg" class="card-face layer" alt="PoslednÃ­ karta" />
              </div>
              <div class="count-badge" id="discardCountBadge">0</div>
            </div>
          </div>


          <!-- Global event timer -->
          <div id="timerArea" style="display:none">
            <div class="hud" id="timerText"></div>
            <div class="timerWrap"><div id="timerBar" class="timerBar"></div></div>
          </div>
        </div>
        <div class="row">
          <button id="endTurn" class="btn">â­ï¸ Konec tahu</button>
          <button id="backLobby" class="btn">â† Lobby</button>
        </div>
      </div>

      <!-- ğŸ”” Live oznÃ¡menÃ­ -->
      <div id="nowBar" class="nowbar" aria-live="polite" aria-atomic="true"></div>
      <div id="toasts" class="toasts" aria-live="polite" aria-atomic="false"></div>


      <!-- HernÃ­ stÅ¯l -->
      <div class="game-table">
        <!-- OstatnÃ­ hrÃ¡Äi -->
        <div class="opponents-area panel">
          <div class="table" id="table"></div>
        </div>

        <!-- Moje postava -->
        <div class="player-area panel">
          <div class="player-header">
            <div class="player-avatar">
              <img src="img/player.png" alt="Moje postava">
            </div>
            <div class="player-info">
              <div class="player-name" id="myName">Moje postava</div>
              <div class="player-hp hearts" id="meHearts"></div>
              <div id="playerStatus" class="status"></div>
            </div>
          </div>
          <div class="player-equip">
            <div id="myEquip" class="equip-grid" aria-label="Moje vybavenÃ­"></div>
          </div>
          <div class="player-hand">
            <div id="hand" class="hand"></div>
          </div>
        </div>
      </div>

      <!-- Log -->
      <div class="panel log-panel">
        <div class="title">ğŸ“œ HernÃ­ log</div>
        <div class="log" id="log" aria-live="polite"></div>
      </div>
    </section>

  </div>

  <!-- REACTION MODALS -->
  <!-- Shot (classic dodge) -->
  <div class="overlay" id="askShot" role="dialog" aria-modal="true" aria-labelledby="shotTitle">
    <div class="ask-box">
      <h3 id="shotTitle" style="margin:0 0 8px">Reakce na VÃ½stÅ™el</h3>
      <p class="muted" style="margin:0 0 10px">ZahrÃ¡t ğŸ›¡ï¸ Ãšhyb nebo pÅ™ijmout zÃ¡sah?</p>
      <div class="timerWrap" aria-hidden="true"><div id="shotTimer" class="timerBar red"></div></div>
      <div class="row" style="margin-top:8px">
        <button id="askShotYes" class="btn btn-primary">ğŸ›¡ï¸ Ãšhyb</button>
        <button id="askShotNo" class="btn">UtrÅ¾it zÃ¡sah</button>
      </div>
    </div>
  </div>

  <!-- Mass events (Shootout/Spray) -->
  <div class="overlay" id="askMass" role="dialog" aria-modal="true" aria-labelledby="massTitle" aria-describedby="massBody">
    <div class="ask-box">
      <h3 id="massTitle" style="margin:0 0 8px">UdÃ¡lost</h3>
      <p id="massBody" class="muted" style="margin:0 0 10px"></p>
      <div class="timerWrap" aria-hidden="true"><div id="massTimer" class="timerBar gold"></div></div>
      <div class="row" style="margin-top:8px">
        <button id="massYes" class="btn btn-primary">Odhodit poÅ¾adovanou kartu</button>
        <button id="massNo" class="btn">Nechat bÃ½t</button>
      </div>
    </div>
  </div>

  <!-- Vendetta -->
  <div class="overlay" id="askVend" role="dialog" aria-modal="true" aria-labelledby="vendTitle">
    <div class="ask-box">
      <h3 id="vendTitle" style="margin:0 0 8px">Vendeta â€“ tvoje odpovÄ›Ä</h3>
      <p class="muted" style="margin:0 0 10px">OdhoÄ ğŸ”« VÃ½stÅ™el, nebo pÅ™ijmi zÃ¡sah.</p>
      <div class="timerWrap" aria-hidden="true"><div id="vendTimer" class="timerBar red"></div></div>
      <div class="row" style="margin-top:8px">
        <button id="vendYes" class="btn btn-primary">Odhodit ğŸ”«</button>
        <button id="vendNo" class="btn">PÅ™ijmout zÃ¡sah</button>
      </div>
    </div>
  </div>


  <!-- Hod kostkou -->
<div class="overlay" id="diceOverlay">
  <div class="ask-box" style="text-align:center">
    <h3 id="diceTitle">ğŸ² Hod kostkou</h3>
    <div id="diceResult" style="font-size:50px; margin-top:10px;">ğŸ²</div>
  </div>
</div>


</body>
</html>
