<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mafia Stand-off – Realtime</title>
  <link rel="icon" type="image/x-icon" href="img/logo.png">
  <meta name="description" content="Mafia Stand-off: Realtime karetní hra inspirovaná noir mafiánským světem. Hrajte s přáteli v reálném čase.">

  <!-- Načítání rozdělených CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/buttons.css">
  <link rel="stylesheet" href="css/lobby.css">
  <link rel="stylesheet" href="css/board.css">
  <link rel="stylesheet" href="css/cards.css">
  <link rel="stylesheet" href="css/overlays.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/scrollbar.css">

  <!-- Game script -->
  <script src="game.js" defer></script>
</head>

<body>
  <div id="app" class="grid">

    <!-- LOBBY -->
    <section class="panel lobby-hero" id="lobbyPanel" aria-label="Lobby">
      <!-- HERO BANNER -->
      <div class="lobby-banner" aria-hidden="true">
        <img src="img/banner.jpg" alt="Mafia Stand-off Banner">
      </div>

      <div class="lobby-wrap">
        <!-- LEFT -->
        <div class="lobby-left">
          <div class="lobby-title">
            <img src="img/logo.png" alt="Mafia Stand-off Logo" class="logo-img">
            <div>
              <div class="brand">Mafia Stand-off</div>
              <div class="muted">Real-time party card game • 2 až 7 hráčů</div>
            </div>
          </div>

          <div class="glass">
            <div class="muted" style="margin-bottom:8px">Vytvořit novou hru</div>
            <div class="row">
              <input id="name" class="input big" placeholder="Vaše jméno" />
              <button id="createBtn" class="btn pill btn-primary">+ Vytvořit lobby</button>
            </div>
            <div class="hint" style="margin-top:8px">Tip: jméno můžeš kdykoli změnit před připojením.</div>
          </div>

          <div class="glass players-card">
            <div class="muted" style="margin-bottom:6px">Hráči v lobby</div>
            <div id="players" class="list muted"><span class="hint">Zatím nikdo…</span></div>
            <div class="cta-row" style="margin-top:10px">
              <button id="readyBtn" class="btn pill btn-secondary">Jsem připraven</button>
              <button id="startBtn" class="btn pill btn-success" disabled>▶ Start hry (host)</button>
            </div>
            <div id="lobbyInfo" class="hint" style="margin-top:8px"></div>
          </div>

          <div class="hint">Verze 0.2.4-alpha</div>
        </div>

        <!-- RIGHT -->
        <div class="lobby-right">
          <div class="glass">
            <div class="muted" style="margin-bottom:8px">Připojit se ke hře</div>
            <div class="row">
              <input id="joinId" class="input big" placeholder="Kód lobby (např. ABCD)" style="width:100%;max-width:260px" />
              <button id="joinBtn" class="btn pill">Připojit</button>
            </div>
            <div style="margin-top:12px">
              <span class="lobby-code">KÓD: <span id="codeMirror">—</span></span>
            </div>
            <div class="hint" style="margin-top:6px">Kód sdílí host poté, co lobby vytvoří.</div>
          </div>

          <div class="glass" style="margin-top:12px">
            <div class="muted">Jak to funguje?</div>
            <ul class="muted" style="margin:6px 0 0 18px; line-height:1.6">
              <li>Host klikne „Vytvořit lobby“ – objeví se kód.</li>
              <li>Ostatní zadají kód a kliknou „Připojit“.</li>
              <li>Jakmile je vás min. 2 a všichni jsou „Připraveni“, host může „Start hry“.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- BOARD -->
    <section class="panel" id="boardPanel" style="display:none" aria-label="Herní stůl">
      <div class="board-top row" style="justify-content:space-between;align-items:flex-start">
        <div>
          <b>🕴️ Mafia Stand-off</b> <span class="muted" id="roomTag"></span>
          <div class="hud" id="hud"></div>
          <div class="hud" id="continental"></div>

          <!-- ✅ Nový HUD řádek se správnými ID -->
           
          <div class="row" style="margin-top:8px; gap:16px; font-size:14px">
            <div>🔁 Na tahu: <b id="turnName">—</b></div>
            <div>📦 Balíček: <b id="deckCount">0</b></div>
            <div>🗑️ Odhazovací: <b id="discardCount">0</b></div>
          </div>
          
          <!-- 🔹 Piles (draw + discard) -->
          <div class="piles">
            <!-- Draw pile (zadní strana) -->
            <div class="pile draw" id="drawPile" title="Balíček">
              <div class="stack">
                <div class="card-back layer"></div>
                <div class="card-back layer"></div>
                <div class="card-back layer"></div>
              </div>
              <div class="count-badge" id="deckCountBadge">0</div>
            </div>

            <!-- Discard pile (poslední karta navrchu) -->
            <div class="pile discard" id="discardPile" title="Odhazovací balíček">
              <div class="stack">
                <img id="discardTopImg" class="card-face layer" alt="Poslední karta" />
              </div>
              <div class="count-badge" id="discardCountBadge">0</div>
            </div>
          </div>


          <!-- Global event timer -->
          <div id="timerArea" style="display:none">
            <div class="hud" id="timerText"></div>
            <div class="timerWrap"><div id="timerBar" class="timerBar"></div></div>
          </div>
        </div>
        <div class="row">
          <button id="endTurn" class="btn">⏭️ Konec tahu</button>
          <button id="backLobby" class="btn">← Lobby</button>
        </div>
      </div>

      <!-- 🔔 Live oznámení -->
      <div id="nowBar" class="nowbar" aria-live="polite" aria-atomic="true"></div>
      <div id="toasts" class="toasts" aria-live="polite" aria-atomic="false"></div>


      <!-- Herní stůl -->
      <div class="game-table">
        <!-- Ostatní hráči -->
        <div class="opponents-area panel">
          <div class="table" id="table"></div>
        </div>

        <!-- Moje postava -->
        <div class="player-area panel">
          <div class="player-header">
            <div class="player-avatar">
              <img src="img/player.png" alt="Moje postava">
            </div>
            <div class="player-info">
              <div class="player-name" id="myName">Moje postava</div>
              <div class="player-hp hearts" id="meHearts"></div>
              <div id="playerStatus" class="status"></div>
            </div>
          </div>
          <div class="player-equip">
            <div id="myEquip" class="equip-grid" aria-label="Moje vybavení"></div>
          </div>
          <div class="player-hand">
            <div id="hand" class="hand"></div>
          </div>
        </div>
      </div>

      <!-- Log -->
      <div class="panel log-panel">
        <div class="title">📜 Herní log</div>
        <div class="log" id="log" aria-live="polite"></div>
      </div>
    </section>

  </div>

  <!-- REACTION MODALS -->
  <!-- Shot (classic dodge) -->
  <div class="overlay" id="askShot" role="dialog" aria-modal="true" aria-labelledby="shotTitle">
    <div class="ask-box">
      <h3 id="shotTitle" style="margin:0 0 8px">Reakce na Výstřel</h3>
      <p class="muted" style="margin:0 0 10px">Zahrát 🛡️ Úhyb nebo přijmout zásah?</p>
      <div class="timerWrap" aria-hidden="true"><div id="shotTimer" class="timerBar red"></div></div>
      <div class="row" style="margin-top:8px">
        <button id="askShotYes" class="btn btn-primary">🛡️ Úhyb</button>
        <button id="askShotNo" class="btn">Utržit zásah</button>
      </div>
    </div>
  </div>

  <!-- Mass events (Shootout/Spray) -->
  <div class="overlay" id="askMass" role="dialog" aria-modal="true" aria-labelledby="massTitle" aria-describedby="massBody">
    <div class="ask-box">
      <h3 id="massTitle" style="margin:0 0 8px">Událost</h3>
      <p id="massBody" class="muted" style="margin:0 0 10px"></p>
      <div class="timerWrap" aria-hidden="true"><div id="massTimer" class="timerBar gold"></div></div>
      <div class="row" style="margin-top:8px">
        <button id="massYes" class="btn btn-primary">Odhodit požadovanou kartu</button>
        <button id="massNo" class="btn">Nechat být</button>
      </div>
    </div>
  </div>

  <!-- Vendetta -->
  <div class="overlay" id="askVend" role="dialog" aria-modal="true" aria-labelledby="vendTitle">
    <div class="ask-box">
      <h3 id="vendTitle" style="margin:0 0 8px">Vendeta – tvoje odpověď</h3>
      <p class="muted" style="margin:0 0 10px">Odhoď 🔫 Výstřel, nebo přijmi zásah.</p>
      <div class="timerWrap" aria-hidden="true"><div id="vendTimer" class="timerBar red"></div></div>
      <div class="row" style="margin-top:8px">
        <button id="vendYes" class="btn btn-primary">Odhodit 🔫</button>
        <button id="vendNo" class="btn">Přijmout zásah</button>
      </div>
    </div>
  </div>


  <!-- Hod kostkou -->
<div class="overlay" id="diceOverlay">
  <div class="ask-box" style="text-align:center">
    <h3 id="diceTitle">🎲 Hod kostkou</h3>
    <div id="diceResult" style="font-size:50px; margin-top:10px;">🎲</div>
  </div>
</div>


</body>
</html>
